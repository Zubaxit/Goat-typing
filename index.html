<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goat Typing Machine</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Hind+Siliguri:wght@400;600&display=swap" rel="stylesheet">



    <style>
    /* 1. ANIMATION LAYER FIX */
    #bgAnimationLayer {
        position: fixed;
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        z-index: 0; /* Background ‡¶è‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ Content ‡¶è‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá */
        pointer-events: none; 
        overflow: hidden;
    }
    .app-container {
        position: relative; 
        z-index: 1; /* Content ‡¶â‡¶™‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
    }

    /* 2. ANIMATION KEYFRAMES (Snow, Leaf, Matrix) */
    .snowflake {
        position: absolute; top: -20px; background: white;
        border-radius: 50%; opacity: 0.8;
        animation: fall linear infinite;
    }
    @keyframes fall { to { transform: translateY(110vh); } }

    .leaf {
        position: absolute; width: 20px; height: 20px; background: #4ade80;
        border-radius: 0 50% 0 50%; 
        animation: fallLeaf linear infinite;
    }
    @keyframes fallLeaf { to { transform: translateY(110vh) rotate(360deg); } }

    .matrix-col {
        position: absolute; top: -100px; color: #0f0;
        font-family: monospace; font-size: 1.5rem;
        writing-mode: vertical-rl; text-orientation: upright;
        opacity: 0.8; text-shadow: 0 0 5px #0f0;
        animation: matrixFall linear infinite;
    }
    @keyframes matrixFall { to { transform: translateY(120vh); } }

    .firefly {
        position: absolute; width: 6px; height: 6px; background: #facc15;
        border-radius: 50%; box-shadow: 0 0 15px #facc15;
        animation: fly 6s ease-in-out infinite alternate;
    }
    @keyframes fly { 
        0% { transform: translate(0, 0) scale(1); opacity: 0.6; }
        100% { transform: translate(100px, -100px) scale(1.2); opacity: 1; }
    }

    /* 3. HEATMAP COLORS (Important ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶ì‡¶≠‡¶æ‡¶∞‡¶∞‡¶æ‡¶á‡¶° ‡¶π‡ßü) */
    .key.heat-low { background: #facc15 !important; color: black !important; box-shadow: 0 0 15px #facc15 !important; transition: 0.2s; }
    .key.heat-med { background: #f97316 !important; color: black !important; box-shadow: 0 0 20px #f97316 !important; transition: 0.2s; }
    .key.heat-high { background: #ef4444 !important; color: white !important; box-shadow: 0 0 25px #ef4444 !important; transition: 0.2s; }

    /* 4. SPOTLIGHT MODE (‡¶∏‡¶¨ ‡¶ù‡¶æ‡¶™‡¶∏‡¶æ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá) */
    body.spotlight-mode > *:not(.app-container),
    body.spotlight-mode .app-container > *:not(.main-game-area) {
        opacity: 0.1 !important;
        filter: blur(4px) !important;
        transition: all 0.5s ease;
    }
    body.spotlight-mode .typing-section {
        opacity: 1 !important;
        filter: none !important;
        transform: scale(1.02);
        z-index: 1000;
        position: relative;
    }
</style>
</head>
<body>
    <div id="bgAnimationLayer" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; overflow: hidden;"></div>
<div id="animatedBgContainer" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none;"></div>
<canvas id="effectCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>

    <div id="bgAnimationLayer" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; overflow: hidden;"></div>

<div id="loaderOverlay">
    <div class="loader-wrapper">
        
        <div class="q-ring ring-1"></div>
        <div class="q-ring ring-2"></div>
        <div class="q-ring ring-3"></div>
        <div class="q-core"></div>

        <div class="loading-text-container">
            <div class="main-title">
                <span class="letter-g">G</span>
                <span class="letter-o">O</span>
                <span class="letter-a">A</span>
                <span class="letter-t">T</span>
                <span class="space"> </span>
                <span class="word-type">TYPING</span>
            </div>
            
            <div class="loading-bar-container">
                <div class="loading-bar-fill" id="loaderBarFill"></div>
            </div>
            
            <div class="digital-percent">
                <span id="loadingPercentage">0</span><span class="symbol">%</span>
            </div>
        </div>

    </div>
</div>

<div id="offlineOverlay" class="hidden">
    <div class="offline-content">
        <h1 class="glitch" data-text="CONNECTION LOST">CONNECTION LOST</h1>
        <p class="cyber-text-small">RECONNECTING...</p>
        <button onclick="window.location.reload()" class="retry-btn cybr-btn">RETRY</button>
    </div>
</div>

<aside class="gt-sidebar">

    <div id="sidebarLock" class="sidebar-lock hidden">
        <div class="lock-content">
            <h3>üîí Sidebar Locked</h3>
            <p id="lockMessage">Login to unlock sidebar</p>
            <button id="lockActionBtn">Login</button>
        </div>
    </div>

    <div class="sidebar-inner">
        
       <div class="gt-logo">
    <div class="gt-logo-icon">‚å®Ô∏è</div>
    <div>
        <h1>GoatType</h1>
        <a href="pro.html" class="gt-badge" style="text-decoration:none; cursor:pointer;">
            PRO v2.0 <i class="fas fa-arrow-right" style="font-size:0.6rem;"></i>
        </a>
    </div>
</div>

        <div class="gt-section">
            <h3>üìà LIVE STATS</h3>
            <div class="gt-stats-grid">
                <div class="gt-card">
                    <span>WPM</span>
                    <strong id="wpm">0</strong>
                </div>
                <div class="gt-card">
                    <span>Accuracy</span>
                    <strong id="accuracy">100%</strong>
                </div>
                <div class="gt-card">
                    <span>Errors</span>
                    <strong id="errors" class="red">0</strong>
                </div>
                <div class="gt-card">
                    <span>Time</span>
                    <strong id="time" class="orange">60</strong>
                </div>
            </div>
        </div>

        <div class="gt-section">
            <h3>üß© MISTAKE PATTERN</h3>
            <div class="gt-info-row">
                <span>Most Wrong Key:</span>
                <div id="wrongKey" class="gt-pill">-</div>
            </div>
            <div class="gt-info-row">
                <span>Weak Finger:</span>
                <div id="weakFinger" class="gt-pill">-</div>
            </div>
        </div>

        <div class="gt-section">
            <h3>üìä SESSION PACE</h3>
            <div class="chart-legend">
                <div class="legend-item">
                    <span class="legend-dot" style="background:#facc15"></span> WPM
                </div>
                <div class="legend-item">
                    <span class="legend-dot" style="background:#22d3ee"></span> Accuracy
                </div>
                <div class="legend-item">
                    <span class="legend-dot" style="background:#f87171"></span> Errors
                </div>
            </div>
            <canvas id="paceChart" width="260" height="120"></canvas>
        </div>
        
        <div id="chartTooltip" class="chart-tooltip"></div>
    </div> </aside>
<button id="exitFsBtn" class="exit-fs-btn" onclick="toggleFullScreen()">
    <i class="fas fa-times"></i> Exit Focus
</button>

<button id="guideFab" class="floating-btn" onclick="openModal()" title="‡¶ó‡¶æ‡¶á‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®">
    <i class="fas fa-hand-paper"></i>
</button>

<button id="contactFab" class="floating-contact-btn" onclick="toggleContactPopup()" title="‡¶°‡ßá‡¶≠‡ßá‡¶≤‡¶™‡¶æ‡¶∞‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶•‡¶æ ‡¶¨‡¶≤‡ßÅ‡¶®">
    <i class="fab fa-facebook-messenger"></i>
</button>

<div id="creatorPopup" class="messenger-popup">
    <div class="popup-header-area">
        <a href="https://www.facebook.com/muhammad.emon.738798" target="_blank" class="profile-link">
            <div class="admin-badge">
                <img src="emon.png" onerror="this.src='https://via.placeholder.com/50'" alt="Admin">
            </div>
            <div class="admin-info">
                <strong class="admin-name">Muhammad Emon</strong>
                <span class="admin-role">Developer</span>
            </div>
        </a>
    </div>
    <div class="popup-body">
        <p>üôè Hi</p>
        <p class="popup-message">
            ‡¶Ü‡¶™‡¶®‡¶ø ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶è‡¶á ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶∞ <b>v1.02 (Demo Version)</b> ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡ßá‡¶®‡•§
            <br><br>
            ‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá‡¶®‚Äî‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø <b>‡¶°‡ßá‡¶Æ‡ßã ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®</b>‡•§ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ó‡ßç‡¶≤‡¶ø‡¶ö, ‡¶¨‡¶æ‡¶ó ‡¶è‡¶¨‡¶Ç ‡¶Ö‡¶™‡ßç‡¶∞‡¶§‡ßç‡¶Ø‡¶æ‡¶∂‡¶ø‡¶§ ‡¶Ü‡¶ö‡¶∞‡¶£ ‡¶•‡¶æ‡¶ï‡¶æ ‡¶∏‡ßç‡¶¨‡¶æ‡¶≠‡¶æ‡¶¨‡¶ø‡¶ï‡•§
            <br><br>
            ‡¶∏‡¶Æ‡¶Ø‡¶º ‡¶ì ‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶¨‡¶¶‡ßç‡¶ß‡¶§‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞‡¶ü‡¶ø <b>‡¶≤‡ßã ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® PC</b> ‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Ø ‡¶ï‡¶∞‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá,
            ‡¶Ø‡¶æ‡¶§‡ßá ‡¶∏‡¶¨‡¶æ‡¶á ‡¶Ö‡¶®‡ßç‡¶§‡¶§ PC-‡¶§‡ßá <b>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç (‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º)</b> ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§
            <br><br>
            ‡¶∏‡¶´‡¶ü‡¶ì‡¶Ø‡¶º‡ßç‡¶Ø‡¶æ‡¶∞‡¶ü‡¶ø ‡¶è‡¶ñ‡¶®‡ßã ‡¶™‡ßÅ‡¶∞‡ßã‡¶™‡ßÅ‡¶∞‡¶ø ‡¶Ö‡¶™‡ßç‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú‡¶° ‡¶®‡¶Ø‡¶º, ‡¶Ö‡¶®‡ßá‡¶ï ‡¶¨‡¶æ‡¶ó ‡¶è‡¶ñ‡¶®‡ßã ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø ‡¶è‡¶¨‡¶Ç
            ‡¶Æ‡ßÇ‡¶≤ ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®‡ßá‡¶∞ ‡¶Ö‡¶®‡ßá‡¶ï ‡¶´‡¶ø‡¶ö‡¶æ‡¶∞ ‡¶ì ‡¶Ö‡¶™‡¶∂‡¶® ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ö‡¶®‡ßÅ‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡•§ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶ï‡¶∞‡ßá ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º ‡¶ï‡¶ø‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶´‡ßÅ‡¶≤ ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü‡¶ü‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶®‡¶æ‡¶á ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶æ‡¶≤ ‡¶ï‡¶®‡¶´‡ßç‡¶≤‡¶ø‡¶ï‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá‡•§ ‡¶´‡ßÅ‡¶≤ ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®‡ßá ‡¶∏‡¶¨ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡¶Ü‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø‡¶™‡¶≤ ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü‡ßá‡¶∞ ‡¶∏‡ßÅ‡¶¨‡¶ø‡¶ß‡¶æ ‡¶Ü‡¶õ‡ßá‡•§
            <br><br>
            <div class="popup-message bengali-note">
                <p>
                    ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Æ‡ßÅ‡¶°‡ßá‡¶á ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡•§ ‡¶ï‡¶æ‡¶∞‡¶£, ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø‡¶∞ ‡¶Æ‡¶§‡ßã
                    ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶Ø‡¶º ‡¶è‡¶ñ‡¶®‡ßã ‡¶è‡¶á ‡¶ß‡¶∞‡¶£‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶∏‡¶ø‡¶Æ‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞ ‡¶®‡ßá‡¶á‡•§ <br>‡¶ï‡¶æ‡¶∞‡¶£ 
                    ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶∞ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá <b>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶∞‡¶£</b> ‡¶è‡¶¨‡¶Ç <b>‡¶ï‡ßã‡¶° ‡¶®‡¶≤‡ßá‡¶ú</b> ‡¶è‡¶á ‡¶¶‡ßÅ‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶®‡ßç‡¶¨‡¶Ø‡¶º ‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø‡•§
                    ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶¨‡¶∞‡ßç‡¶£ ‡¶ì ‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º (‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡¶ø‡¶ï) ‡¶ï‡¶ø‡¶¨‡ßã‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶∏‡¶ø‡¶ï‡ßÅ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏ ‡¶∏‡ßç‡¶¨‡¶æ‡¶≠‡¶æ‡¶¨‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá‡¶á
                    ‡¶ú‡¶ü‡¶ø‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶è‡¶á ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡ßá ‡¶∞‡¶ø‡¶∏‡ßã‡¶∞‡ßç‡¶∏‡¶ì ‡¶∏‡ßÄ‡¶Æ‡¶ø‡¶§‡•§
                </p>
                <p>
                    ‡¶∏‡¶π‡¶ú‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶≤‡¶≤‡ßá‚Äî‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø‡¶§‡ßá <i>Forgive</i> ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø ‡ß≠‡¶ü‡¶ø ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞ ‡¶™‡¶∞‡¶™‡¶∞ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡¶≤‡ßá‡¶á
                    ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞‡¶≠‡¶æ‡¶¨‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º‡•§ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶Ø‡¶º <b>‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ</b> ‡¶≤‡¶ø‡¶ñ‡¶§‡ßá ‡¶π‡¶≤‡ßá
                    <code>‡¶ï‡ßç + ‡¶∑</code> ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡ßá <b>‡¶ï‡ßç‡¶∑</b> ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶Ø‡¶º, ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßÅ‡¶∞‡ßã ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞
                    ‡¶ö‡ßá‡¶π‡¶æ‡¶∞‡¶æ‡¶á ‡¶¨‡¶¶‡¶≤‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º‡•§
                </p>
                <p>
                    ‡¶è‡¶ï‡¶á‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡¶§‡¶ø ‡¶ö‡¶ø‡¶π‡ßç‡¶®, ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶¨‡¶∞‡ßç‡¶£, ‡¶ï‡¶æ‡¶∞, ‡¶´‡¶≤‡¶æ‚Äî‡¶è‡¶á ‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶Æ‡¶ø‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç
                    ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï-‡¶è‡¶®‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ï‡ßç‡¶∏ ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡•§ ‡¶Ö‡¶®‡ßá‡¶ï ‡¶∏‡¶Æ‡¶Ø‡¶º ‡ß®‚Äì‡ß©‚Äì‡ß™‡¶ü‡¶ø, ‡¶è‡¶Æ‡¶®‡¶ï‡¶ø ‡¶ï‡¶ñ‡¶®‡¶ì ‡¶ï‡¶ñ‡¶®‡¶ì
                    ‡ß´‡¶ü‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶¨‡¶∞‡ßç‡¶£/‡¶ï‡¶æ‡¶∞/‡¶´‡¶≤‡¶æ ‡¶Æ‡¶ø‡¶≤‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§‡¶¨‡¶∞‡ßç‡¶£ ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º,
                    ‡¶Ø‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø‡¶∞ ‡¶ö‡ßá‡¶π‡¶æ‡¶∞‡¶æ ‡¶á‡¶â‡¶®‡¶ø‡¶ï‡•§
                </p>
                <p>
                    ‡¶è‡¶á ‡¶∏‡¶¨ ‡¶¨‡¶∞‡ßç‡¶£‡¶ï‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶∏‡¶ø‡¶ï‡ßÅ‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶ï‡¶∞‡¶§‡ßá ‡¶π‡¶Ø‡¶º,
                    ‡¶Ø‡¶æ ‡¶¨‡¶æ‡¶∏‡ßç‡¶§‡¶¨‡ßá ‡¶Ö‡¶§‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶ú‡¶ü‡¶ø‡¶≤ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶æ‡¶ú‡•§
                </p>
                <p>
                    ‡¶§‡¶¨‡ßÅ‡¶ì ‡¶Ö‡¶≤‡ßç‡¶™ ‡¶∏‡¶Æ‡¶Ø‡¶º‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ø‡¶§‡¶ü‡¶æ ‡¶∏‡¶Æ‡ßç‡¶≠‡¶¨
                    <b>‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º (‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡¶ø‡¶ï)</b> ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü‡ßá‡¶∞ ‡¶Ü‡¶¶‡¶≤‡ßá ‡¶ï‡ßÄ-‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™‡¶ø‡¶Ç ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ø‡¶Ç ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø‡•§
                    ‡¶§‡¶¨‡ßá ‡¶∏‡ßç‡¶¨‡ßÄ‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø‚Äî‡¶è‡¶ñ‡¶®‡¶ì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶™‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶â‡¶®‡ßç‡¶®‡¶§‡¶ø‡¶∞ ‡¶∏‡ßÅ‡¶Ø‡ßã‡¶ó ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§
                    ‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£‡¶∏‡ßç‡¶¨‡¶∞‡ßÇ‡¶™, ‡¶Æ‡¶æ‡¶ù‡ßá ‡¶Æ‡¶æ‡¶ù‡ßá ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶∏‡¶Ç‡¶ï‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶§ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡•§
                </p>
                <p>
                    ‡¶è‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶¨‡¶á ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®‡¶Ø‡ßã‡¶ó‡ßç‡¶Ø, ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®
                    <b>‡¶Ü‡¶™‡¶®‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶∞‡ßç‡¶•‡¶®</b> ‡¶è‡¶¨‡¶Ç <b>‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º</b>‡•§
                    ‡¶è‡¶á ‡¶¶‡ßÅ‡¶á‡¶Ø‡¶º‡ßá‡¶∞ ‡¶ì‡¶™‡¶∞‡¶á ‡¶Æ‡ßÇ‡¶≤‡¶§ ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶≠‡¶¨‡¶ø‡¶∑‡ßç‡¶Ø‡ßé ‡¶®‡¶ø‡¶∞‡ßç‡¶≠‡¶∞ ‡¶ï‡¶∞‡¶õ‡ßá‡•§
                </p>
                <p><b>‡¶Ü‡¶∂‡¶æ ‡¶ï‡¶∞‡¶ø ‡¶¨‡¶ø‡¶∑‡¶Ø‡¶º‡¶ü‡¶ø ‡¶¨‡ßÅ‡¶ù‡¶§‡ßá ‡¶™‡ßá‡¶∞‡ßá‡¶õ‡ßá‡¶®‡•§</b></p>
            </div>
            ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶® ‡¶ì ‡¶ï‡¶æ‡¶ú‡ßá‡¶∞ ‡¶ß‡¶∞‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶è‡¶á ‡¶∏‡ßÄ‡¶Æ‡¶æ‡¶¨‡¶¶‡ßç‡¶ß‡¶§‡¶æ‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶Æ‡¶æ‡¶®‡¶ø‡¶Ø‡¶º‡ßá ‡¶®‡¶ø‡¶®,
            ‡¶Ö‡¶•‡¶¨‡¶æ <b>‡¶Æ‡ßÇ‡¶≤ ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶®</b> ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
            <br><br>
            ‡¶Æ‡ßÇ‡¶≤ ‡¶≠‡¶æ‡¶∞‡ßç‡¶∏‡¶® ‡¶´‡ßç‡¶∞‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®,
            ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶®‡¶ï ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§
        </p>
    </div>
    <a href="https://www.facebook.com/muhammad.emon.738798" target="_blank" class="chat-now-btn">
        ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶¶‡¶ø‡¶® <i class="fas fa-paper-plane"></i>
    </a>
    <a href="https://zubaxit.github.io/Repo/" target="_blank" class="visit-site-btn">
        üåê ‡¶ì‡¶Ø‡¶º‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
    </a>
</div>

<div id="warningModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: #ffcc00; margin-bottom: 20px;"></i>
        <h3>‡¶ñ‡ßá‡¶≤‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø!</h3>
        <p>‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶™‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶ü‡¶ø‡¶∏ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶§‡ßá Start ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶ø ‡¶ö‡¶æ‡¶™‡ßÅ‡¶®‡•§</p>
        <button class="stylish-btn start-btn-stylish" onclick="closeWarningAndStart()" style="margin: 0 auto;">Start Game</button>
    </div>
</div>

<div class="app-container">
    
    <div class="main-game-area">
        
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="switchTab('normal')"><i class="fas fa-font"></i> ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£</button>
            <button class="tab-btn" onclick="switchTab('coding')"><i class="fas fa-code"></i> ‡¶ï‡ßã‡¶°‡¶ø‡¶Ç</button>
            <button class="tab-btn" onclick="switchTab('bengali')"><i class="fas fa-language"></i> ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</button>
            <button class="tab-btn" onclick="switchTab('custom')"><i class="fas fa-pen"></i> ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ</button>
        </div>

        <header class="top-bar">
            <div class="settings-group game-settings" id="gameSettings">
                <select id="levelSelector" class="stylish-input" onchange="changeLevel()">
                    <option value="easy">‡¶≤‡ßá‡¶≠‡ßá‡¶≤: ‡¶∏‡¶π‡¶ú</option>
                    <option value="medium">‡¶≤‡ßá‡¶≠‡ßá‡¶≤: ‡¶Æ‡¶æ‡¶ù‡¶æ‡¶∞‡¶ø</option>
                    <option value="hard">‡¶≤‡ßá‡¶≠‡ßá‡¶≤: ‡¶ï‡¶†‡¶ø‡¶®</option>
                </select>
                <select id="timeSelector" class="stylish-input" onchange="changeTime()">
                    <option value="30">‡ß©‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</option>
                    <option value="60" selected>‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</option>
                    <option value="120">‡ß® ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</option>
                </select>
            </div>

            <div class="settings-group">
                <button id="startBtn" class="stylish-btn start-btn-stylish" onclick="startTest()">
                    <i class="fas fa-play"></i> Start
                </button>
                <button id="resetBtn" class="stylish-btn btn-reset" onclick="resetTest()" style="display: none;">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <div class="settings-group">
                    <div class="reset-dropdown-wrapper" style="position: relative;">
                        <button class="stylish-btn" onclick="toggleResetMenu()" title="‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶Ö‡¶™‡¶∂‡¶®">
                            <i class="fas fa-power-off"></i> 
                        </button>
                        <div id="resetDropdown" class="reset-dropdown-content">
                            <a href="#" onclick="softReset()"><i class="fas fa-sync-alt"></i> ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü (‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂)</a>
                            <a href="#" onclick="hardReset()" class="danger-option"><i class="fas fa-trash-alt"></i> ‡¶π‡¶æ‡¶∞‡ßç‡¶° ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</a>
                        </div>
                    </div>
                </div>
                <button class="stylish-btn theme-btn" onclick="toggleTheme()" title="‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="stylish-btn" onclick="toggleFullScreen()" title="‡¶´‡ßã‡¶ï‡¶æ‡¶∏ ‡¶Æ‡ßã‡¶°">
                    <i class="fas fa-expand"></i> Focus
                </button>
                
                <button class="stylish-btn" onclick="openProSettings()" title="Pro Settings">
                    <i class="fas fa-cog"></i>
                </button>
                <button onclick="openMultiplayerModal()" class="icon-btn multiplayer-trigger" title="Multiplayer Mode">
                    <i class="fas fa-users"></i>
                </button>
                <div class="auth-section">
                    <button id="login-btn" class="btn-login">
                        <i class="fab fa-google"></i> G Login
                    </button>

                    <div id="userProfileArea" style="display: none; align-items: center; gap: 10px; cursor: pointer;" onclick="handleLogout()" title="Click to Logout">
                        <img id="userImgDisplay" src="" style="width: 35px; height: 35px; border-radius: 50%; border: 2px solid white;">
                        <div style="line-height: 1.2;">
                            <span id="userNameDisplay" style="font-weight: bold; font-size: 0.9rem;">User</span>
                            <span id="proBadgeDisplay" style="display:none; background: gold; color: black; font-size: 0.6rem; padding: 1px 4px; border-radius: 4px;">PRO</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div id="customInputArea" class="custom-area" style="display: none;">
            <div class="settings-group" style="margin-bottom: 15px; justify-content: center; flex-wrap: wrap;">
                <select id="customModeSelector" class="stylish-input" onchange="updateCustomKeyboardPreview(this.value)">
                    <option value="normal">‡¶Æ‡ßã‡¶°: ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ (English)</option>
                    <option value="bengali">‡¶Æ‡ßã‡¶°: ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (‡¶¨‡¶ø‡¶ú‡¶Ø‡¶º)</option>
                    <option value="coding">‡¶Æ‡ßã‡¶°: ‡¶ï‡ßã‡¶°‡¶ø‡¶Ç</option>
                </select>
                <select id="customTimeSelector" class="stylish-input">
                    <option value="30">‡ß©‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</option>
                    <option value="60" selected>‡ß¨‡ß¶ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°</option>
                    <option value="120">‡ß® ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</option>
                    <option value="300">‡ß´ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü</option>
                </select>
            </div>
            <textarea id="customTextSrc" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®..."></textarea>
            <button class="stylish-btn start-btn-stylish" onclick="startCustomTest()" style="width: 100%; margin-top: 10px; justify-content: center;">
                <i class="fas fa-play"></i> ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü
            </button>
        </div>

        <div id="insightPanel">
            <div id="profilePanel" class="insight-box">
                <h4>Typing Analysis</h4>
                <div id="typingBadges"></div>
                <p id="typingSummary">Start typing to see analysis...</p>
            </div>
        </div>

        <div class="typing-section" id="typingSection">
            <div class="text-display" id="quoteDisplay">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
            <input type="text" id="inputField" class="hidden-input" 
            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" 
            data-gramm="false" data-gramm_editor="false" data-enable-grammarly="false" disabled>
            <div id="timerProgressBar"></div>
        </div>

        <div class="instruction-panel" id="instructionPanel">
            <div class="mini-hands-container">
                <svg viewBox="0 0 200 100" class="mini-hands-svg">
                    <g transform="translate(10, 10) scale(0.4)">
                        <path id="svg-l-pinky" d="M20,100 L20,50 Q20,40 30,40 Q40,40 40,50 L40,100" class="mini-finger"/>
                        <path id="svg-l-ring" d="M50,100 L50,30 Q50,20 60,20 Q70,20 70,30 L70,100" class="mini-finger"/>
                        <path id="svg-l-middle" d="M80,100 L80,10 Q80,0 90,0 Q100,0 100,10 L100,100" class="mini-finger"/>
                        <path id="svg-l-index" d="M110,100 L110,20 Q110,10 120,10 Q130,10 130,20 L130,100" class="mini-finger"/>
                        <path id="svg-l-thumb" d="M140,120 L160,110 Q170,115 160,130 L140,140" class="mini-finger"/>
                    </g>
                    <g transform="translate(110, 10) scale(0.4)">
                        <path id="svg-r-pinky" d="M230,100 L230,50 Q230,40 220,40 Q210,40 210,50 L210,100" class="mini-finger"/>
                        <path id="svg-r-ring" d="M200,100 L200,30 Q200,20 190,20 Q180,20 180,30 L180,100" class="mini-finger"/>
                        <path id="svg-r-middle" d="M170,100 L170,10 Q170,0 160,0 Q150,0 150,10 L150,100" class="mini-finger"/>
                        <path id="svg-r-index" d="M140,100 L140,20 Q140,10 130,10 Q120,10 120,20 L120,100" class="mini-finger"/>
                        <path id="svg-r-thumb" d="M110,120 L90,110 Q80,115 90,130 L110,140" class="mini-finger"/>
                    </g>
                </svg>
            </div>
            <div class="instruction-text-wrapper">
                <span id="guideText" class="guide-text">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</span>
                <div id="capsLockWarning" class="caps-warning" style="display: none;">CAPS LOCK ON</div>
            </div>
        </div>

        <div class="keyboard-container">
            <div class="keyboard" id="virtualKeyboard">
                <div class="row">
                    <div class="key pinky-zone" data-key="Backquote">`</div>
                    <div class="key pinky-zone" data-key="Digit1">1</div>
                    <div class="key ring-zone" data-key="Digit2">2</div>
                    <div class="key middle-zone" data-key="Digit3">3</div>
                    <div class="key index-zone" data-key="Digit4">4</div>
                    <div class="key index-zone" data-key="Digit5">5</div>
                    <div class="key index-zone" data-key="Digit6">6</div>
                    <div class="key index-zone" data-key="Digit7">7</div>
                    <div class="key middle-zone" data-key="Digit8">8</div>
                    <div class="key ring-zone" data-key="Digit9">9</div>
                    <div class="key pinky-zone" data-key="Digit0">0</div>
                    <div class="key pinky-zone" data-key="Minus">-</div>
                    <div class="key pinky-zone" data-key="Equal">=</div>
                    <div class="key key-backspace pinky-zone" data-key="Backspace">‚å´</div>
                </div>
                <div class="row">
                    <div class="key key-tab pinky-zone" data-key="Tab">Tab</div>
                    <div class="key pinky-zone" data-key="KeyQ">Q</div>
                    <div class="key ring-zone" data-key="KeyW">W</div>
                    <div class="key middle-zone" data-key="KeyE">E</div>
                    <div class="key index-zone" data-key="KeyR">R</div>
                    <div class="key index-zone" data-key="KeyT">T</div>
                    <div class="key index-zone" data-key="KeyY">Y</div>
                    <div class="key index-zone" data-key="KeyU">U</div>
                    <div class="key middle-zone" data-key="KeyI">I</div>
                    <div class="key ring-zone" data-key="KeyO">O</div>
                    <div class="key pinky-zone" data-key="KeyP">P</div>
                    <div class="key pinky-zone" data-key="BracketLeft">[</div>
                    <div class="key pinky-zone" data-key="BracketRight">]</div>
                    <div class="key pinky-zone" data-key="Backslash">\</div>
                </div>
                <div class="row">
                    <div class="key key-caps pinky-zone" data-key="CapsLock">Caps</div>
                    <div class="key pinky-zone" data-key="KeyA">A</div>
                    <div class="key ring-zone" data-key="KeyS">S</div>
                    <div class="key middle-zone" data-key="KeyD">D</div>
                    <div class="key index-zone" data-key="KeyF">F</div>
                    <div class="key index-zone" data-key="KeyG">G</div>
                    <div class="key index-zone" data-key="KeyH">H</div>
                    <div class="key index-zone" data-key="KeyJ">J</div>
                    <div class="key middle-zone" data-key="KeyK">K</div>
                    <div class="key ring-zone" data-key="KeyL">L</div>
                    <div class="key pinky-zone" data-key="Semicolon">;</div>
                    <div class="key pinky-zone" data-key="Quote">'</div>
                    <div class="key key-enter pinky-zone" data-key="Enter">Enter</div>
                </div>
                <div class="row">
                    <div class="key key-shift pinky-zone" data-key="ShiftLeft">Shift</div>
                    <div class="key pinky-zone" data-key="KeyZ">Z</div>
                    <div class="key ring-zone" data-key="KeyX">X</div>
                    <div class="key middle-zone" data-key="KeyC">C</div>
                    <div class="key index-zone" data-key="KeyV">V</div>
                    <div class="key index-zone" data-key="KeyB">B</div>
                    <div class="key index-zone" data-key="KeyN">N</div>
                    <div class="key index-zone" data-key="KeyM">M</div>
                    <div class="key middle-zone" data-key="Comma">,</div>
                    <div class="key ring-zone" data-key="Period">.</div>
                    <div class="key pinky-zone" data-key="Slash">/</div>
                    <div class="key key-shift pinky-zone" data-key="ShiftRight">Shift</div>
                </div>
                <div class="row">
                    <div class="key key-space thumb-zone" data-key="Space">Space</div>
                </div>
            </div>
        </div>
        
        <div style="text-align:center; margin-top:20px;">
            <button class="stylish-btn" onclick="downloadCertificate()" id="certBtn" style="display: none; margin: 0 auto; background: #2ecc71; color: white; border: none;">
                <i class="fas fa-certificate"></i> ‡¶∏‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶ü ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°
            </button>
        </div>

    </div>
   <aside class="right-sidebar" id="rightSidebarPanel">
    
    <div class="ad-box top-ad">
        <span class="ad-label">Sponsored</span>
       <div class="ad-space top-ad">
    <a href="pro.html" class="goat-ad-link">
        <img src="goat_ad.png" alt="Upgrade to GOAT PRO" class="goat-ad-img">
        <div class="ad-shine"></div>
    </a>
</div>
    </div>

    <div class="leaderboard-box">
        <div class="lb-header">
            <h3>üèÜ ‡¶∏‡¶æ‡¶™‡ßç‡¶§‡¶æ‡¶π‡¶ø‡¶ï ‡¶∏‡ßá‡¶∞‡¶æ</h3>
            <small>Top 5 of This Week</small>
        </div>
        
        <div id="lbLoading" style="text-align:center; padding:15px; color:#888;">
            <i class="fas fa-spinner fa-spin"></i> Loading...
        </div>

        <ul id="weeklyLeaderboardList" class="lb-list scrollable-lb">
            </ul>
    </div>

    <div class="ad-box bottom-ad">
        <span class="ad-label">Advertisement</span>
        <div class="ad-content">
            <p>üåü Bottom Ad Space</p>
            <small>300 x 250</small>
        </div>
    </div>

    <div class="music-player-box hidden" id="proMusicPlayer">
        <div class="music-header">
            <span><i class="fas fa-headphones-alt"></i> Focus Mode</span>
            <div class="live-wave">
                <span></span><span></span><span></span><span></span>
            </div>
        </div>
        <div class="music-info">
            <div class="album-art">
                <i class="fas fa-music"></i>
            </div>
            <div class="track-details">
                <strong id="trackName">Lofi Beats 24/7</strong>
                <small>Chill & Focus</small>
            </div>
        </div>
        <div class="music-controls">
            <button onclick="prevTrack()"><i class="fas fa-backward"></i></button>
            <button onclick="togglePlay()" id="playPauseBtn" class="play-btn"><i class="fas fa-play"></i></button>
            <button onclick="nextTrack()"><i class="fas fa-forward"></i></button>
        </div>
        <audio id="bgAudio" loop>
            <source src="https://cdn.pixabay.com/audio/2022/05/27/audio_1808fbf07a.mp3" type="audio/mp3">
        </audio>
    </div>

</aside>

</div>

<div id="proSettingsModal" class="settings-overlay" style="display: none;">
    <div class="settings-dashboard">
        
        <aside class="settings-sidebar">
            <div class="settings-brand">
                <i class="fas fa-sliders-h"></i> Settings
            </div>
            <nav class="settings-nav">
                <button class="nav-item active" onclick="switchSettingsTab('gameplay')">
                    <i class="fas fa-gamepad"></i> Gameplay
                </button>
                <button class="nav-item" onclick="switchSettingsTab('visuals')">
                    <i class="fas fa-palette"></i> Appearance
                </button>
                <button class="nav-item" onclick="switchSettingsTab('sound')">
                    <i class="fas fa-volume-up"></i> Sound & FX
                </button>
                <button class="nav-item" onclick="switchSettingsTab('pro')">
                    <i class="fas fa-bolt"></i> Pro Tools
                </button>
            </nav>
            <div class="settings-footer">
                <button class="close-dashboard-btn" onclick="closeProSettings()">Close</button>
            </div>
        </aside>

        <main class="settings-content">
            
            <div id="tab-gameplay" class="tab-section active">
                <h2>Gameplay Configuration</h2>
                
                <div class="setting-card">
                    <div class="card-header">
                        <i class="fas fa-ghost"></i> Ghost & Pace
                        <i class="fas fa-lock" style="color: #facc15; font-size: 0.8rem; margin-left: 5px;" title="Pro Feature"></i>
                    </div>
                    <div class="card-body">
                        <div class="control-row">
                            <div class="control-info">
                                <label>Ghost Racer</label>
                                <span>Compete against an AI bot</span>
                            </div>
                            <div class="control-action">
                                <input type="number" id="ghostSpeed" value="40" class="mini-input"
                                       onmousedown="if(!checkProFeature('Ghost Racer')) { event.preventDefault(); this.blur(); return false; }"
                                       onkeydown="if(!checkProFeature('Ghost Racer')) { event.preventDefault(); return false; }"> WPM
                                <label class="switch-ios">
                                    <input type="checkbox" id="toggleGhost" 
                                           onclick="if(!checkProFeature('Ghost Racer')) { event.preventDefault(); return false; }" 
                                           onchange="toggleGhostMode('ghost')">
                                    <span class="slider-ios"></span>
                                </label>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-info">
                                <label>Pace Caret</label>
                                <span>A constant speed visual guide</span>
                            </div>
                            <div class="control-action">
                                <input type="number" id="paceSpeed" value="60" class="mini-input"
                                       onmousedown="if(!checkProFeature('Pace Caret')) { event.preventDefault(); this.blur(); return false; }"
                                       onkeydown="if(!checkProFeature('Pace Caret')) { event.preventDefault(); return false; }"> WPM
                                <label class="switch-ios">
                                    <input type="checkbox" id="togglePace" 
                                           onclick="if(!checkProFeature('Pace Caret')) { event.preventDefault(); return false; }" 
                                           onchange="toggleGhostMode('pace')">
                                    <span class="slider-ios"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="setting-card">
                    <div class="card-header">
                        <i class="fas fa-skull"></i> Difficulty
                        <i class="fas fa-lock" style="color: #facc15; font-size: 0.8rem; margin-left: 5px;" title="Pro Feature"></i>
                    </div>
                    <div class="card-body">
                        <div class="control-row">
                            <div class="control-info">
                                <label>Sudden Death</label>
                                <span>Game over on a single mistake</span>
                            </div>
                            <div class="control-action">
                                <label class="switch-ios">
                                    <input type="checkbox" id="toggleSuddenDeath" 
                                           onclick="if(!checkProFeature('Sudden Death')) { event.preventDefault(); return false; }"
                                           onchange="toggleProFeature('suddenDeath')">
                                    <span class="slider-ios"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-visuals" class="tab-section" style="display: none;">
                <h2>Visual Customization</h2>
                <div class="setting-group">
                    <h3>‚å®Ô∏è Keyboard Layout Style</h3>
                    <div id="kbStyleGrid" class="kb-style-grid">
                    </div>
                </div>

                <div class="setting-card">
                    <div class="card-header">
                        <i class="fas fa-swatchbook"></i> Quick Presets
                        <i class="fas fa-lock" style="color: #facc15; font-size: 0.8rem; margin-left: 5px;" title="Pro Feature"></i>
                    </div>
                    <div class="card-body">
                       <div class="preset-grid-pro">
    <div class="preset-tile" onclick="if(checkProFeature('Quick Themes')) { applyPreset('default'); }" 
         style="background: #f3f4f6; color: #333;">Default</div>
    
    <div class="preset-tile" onclick="if(checkProFeature('Quick Themes')) { applyPreset('dracula'); }" 
         style="background: #282a36; color: #bd93f9; border: 1px solid #bd93f9;">Dracula</div>

    <div class="preset-tile" onclick="if(checkProFeature('Quick Themes')) { applyPreset('midnight'); }" 
         style="background: linear-gradient(135deg, #0f2027, #2c5364); color: white;">Midnight</div>
    
    <div class="preset-tile" onclick="if(checkProFeature('Quick Themes')) { applyPreset('cyberpunk'); }" 
         style="background: #000; color: #fcee0a; border: 1px solid #fcee0a;">Cyberpunk</div>
    
    <div class="preset-tile" onclick="if(checkProFeature('Quick Themes')) { applyPreset('cherry'); }" 
         style="background: linear-gradient(135deg, #ff9a9e, #fecfef); color: #5e2a2a;">Cherry</div>

    <div class="preset-tile" onclick="if(checkProFeature('Quick Themes')) { applyPreset('forest'); }" 
         style="background: linear-gradient(135deg, #134e5e, #71b280); color: white;">Forest</div>
</div>
<div class="setting-card" style="margin-top: 20px;">
    <div class="card-header" style="display:flex; justify-content:space-between; align-items:center;">
        <span>üé® Custom Colors</span>
        <span class="pro-badge" style="background:#ffd700; color:#000; padding:2px 8px; border-radius:4px; font-size:0.7rem;">
            <i class="fas fa-lock"></i> PRO
        </span>
    </div>

    <div class="card-body">
        
        <div class="control-row">
            <div class="control-info">
                <label>Background Style</label>
                <span>Select Solid, Gradient or Animated</span>
            </div>
            <div class="control-action">
                <select id="bgTypeSelector" class="stylish-select" 
                    onchange="if(checkProFeature('Custom Theme')) { toggleBgControls(this.value); } else { this.value = settingsState.theme.bgType; }">
                    <option value="solid">Solid Color</option>
                    <option value="gradient">Gradient</option>
                    <option value="animated">Live Animation</option>
                    <option value="image">Upload Image</option>
                </select>
            </div>
        </div>

        <div id="bgControl-solid" class="control-row" style="display:none;">
            <div class="control-info"><label>Background Color</label></div>
            <div class="control-action">
                <input type="color" id="bgSolidColor" class="color-input" 
                       oninput="if(checkProFeature('Custom Theme')) applyBackground('solid')">
            </div>
        </div>

        <div id="bgControl-gradient" class="control-row" style="display:none;">
            <div class="control-info"><label>Gradient Colors</label></div>
            <div class="control-action" style="display:flex; gap:5px;">
                <input type="color" id="bgGrad1" oninput="if(checkProFeature('Custom Theme')) applyBackground('gradient')">
                <input type="color" id="bgGrad2" oninput="if(checkProFeature('Custom Theme')) applyBackground('gradient')">
                <input type="number" id="bgGradDeg" value="135" class="mini-input" 
                       oninput="if(checkProFeature('Custom Theme')) applyBackground('gradient')">
            </div>
        </div>

        <div id="bgControl-animated" class="control-row" style="display:none;">
            <div class="control-info"><label>Animation Type</label></div>
            <div class="control-action">
                <select id="animTypeSelector" class="stylish-select" 
                        onchange="if(checkProFeature('Custom Theme')) applyBackground('animated')">
                    <option value="leaves">üçÉ Falling Leaves</option>
                    <option value="snow">‚ùÑÔ∏è Snow Storm</option>
                    <option value="rain">üåßÔ∏è Matrix Rain</option>
                    <option value="fireflies">‚ú® Fireflies</option>
                    <option value="embers">üî• Burning Embers</option>
                </select>
            </div>
        </div>

        <div id="bgControl-image" class="control-row" style="display:none;">
            <div class="control-info"><label>Upload Wallpaper</label></div>
            <div class="control-action">
                <input type="file" accept="image/*" class="file-input"
                       onchange="if(checkProFeature('Custom Theme')) { handleImageUpload(this) } else { this.value=''; }">
            </div>
        </div>

        <div class="control-row">
            <div class="control-info"><label>Main Accent Color</label><span>Buttons, Highlights</span></div>
            <div class="control-action">
                <input type="color" id="customMain" class="color-input" 
                       oninput="if(checkProFeature('Custom Theme')) updateCustomColors()">
            </div>
        </div>

        <div class="control-row">
            <div class="control-info"><label>Text Color</label><span>Body text color</span></div>
            <div class="control-action">
                <input type="color" id="customText" class="color-input" 
                       oninput="if(checkProFeature('Custom Theme')) updateCustomColors()">
            </div>
        </div>

        <div class="control-row">
            <div class="control-info"><label>Card Color</label><span>Boxes & sidebar bg</span></div>
            <div class="control-action">
                <input type="color" id="customCard" class="color-input" 
                       oninput="if(checkProFeature('Custom Theme')) updateCustomColors()">
            </div>
        </div>

    </div>
</div>
                    </div>
                </div>

                <div class="setting-card">
                    <div class="card-header">
                        <i class="fas fa-image"></i> Background
                        <i class="fas fa-lock" style="color: #facc15; font-size: 0.8rem; margin-left: 5px;" title="Pro Feature"></i>
                    </div>
                    <div class="card-body">
                        <div class="control-row">
                            <div class="control-info">
                                <label>Background Type</label>
                            </div>
                            <div class="control-action">
                                <select id="bgTypeSelector" class="stylish-select" 
                                        onmousedown="if(!checkProFeature('Background Customization')) { event.preventDefault(); return false; }"
                                        onchange="toggleBgControls(this.value)">
                                    <option value="solid">Solid Color</option>
                                    <option value="gradient">Gradient</option>
                                    <option value="image">Custom Image</option>
                                    <option value="animated">Live Animation</option>
                                </select>
                            </div>
                        </div>

                        <div id="bgControl-solid" class="bg-sub-control" style="display:block;">
                            <div class="control-row">
                                <label>Pick Color:</label>
                                <input type="color" id="bgSolidColor" class="color-box" 
                                       onclick="if(!checkProFeature('Background Customization')) { event.preventDefault(); return false; }"
                                       oninput="applyBackground('solid')">
                            </div>
                        </div>

                        <div id="bgControl-gradient" class="bg-sub-control" style="display:none;">
                            <div class="control-row" style="justify-content: flex-start; gap: 10px;">
                                <label>Color 1:</label> 
                                <input type="color" id="bgGrad1" 
                                       onclick="if(!checkProFeature('Background Customization')) { event.preventDefault(); return false; }"
                                       oninput="applyBackground('gradient')">
                                <label>Color 2:</label> 
                                <input type="color" id="bgGrad2" 
                                       onclick="if(!checkProFeature('Background Customization')) { event.preventDefault(); return false; }"
                                       oninput="applyBackground('gradient')">
                            </div>
                            <div class="control-row">
                                <label>Direction:</label>
                                <input type="range" id="bgGradDeg" min="0" max="360" value="135" 
                                       onmousedown="if(!checkProFeature('Background Customization')) { event.preventDefault(); return false; }"
                                       oninput="applyBackground('gradient')" style="flex-grow: 1; margin-left: 10px;">
                            </div>
                        </div>

                        <div id="bgControl-image" class="bg-sub-control" style="display:none;">
                            <div class="control-row">
                                <input type="file" id="bgImageUpload" accept="image/*" 
                                       onclick="if(!checkProFeature('Background Customization')) { event.preventDefault(); return false; }"
                                       onchange="handleImageUpload(this)" class="file-input">
                            </div>
                            <p style="font-size: 0.8rem; color: #888;">Note: Large images may not save.</p>
                        </div>

                        <div id="bgControl-animated" class="bg-sub-control" style="display:none; margin-top:10px;">
                            <div class="control-row">
                                <label>Effect:</label>
                                <select id="animTypeSelector" class="stylish-select" 
                                        onmousedown="if(!checkProFeature('Live Animation')) { event.preventDefault(); return false; }"
                                        onchange="applyBackground('animated')">
                                    <option value="leaves">üçÉ Falling Leaves</option>
                                    <option value="rain">üíª Matrix Rain</option>
                                    <option value="snow">‚ùÑÔ∏è Snow Storm</option>
                                    <option value="fireflies">‚ú® Golden Fireflies</option>
                                    <option value="emojis">üòé Emoji Fun</option>
                                    <option value="embers">üî• Burning Embers</option>
                                </select>
                            </div>
                            <p style="font-size:0.7rem; color:#888; margin-top:5px;">Animation plays over your current background color.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-sound" class="tab-section" style="display: none;">
                <h2>Audio & Effects</h2>
                <div class="setting-card">
                    <div class="card-body">
                        <div class="control-row">
                            <div class="control-info">
                                <label>Keyboard Sound</label>
                                <span>Mechanical feedback while typing</span>
                            </div>
                            <div class="control-action">
                                <select id="soundSelect" class="stylish-select" onchange="changeSoundProfile(this.value)">
                                    <option value="none">Mute</option>
                                    <option value="mechanical">Cherry MX Blue</option>
                                    <option value="typewriter">Typewriter</option>
                                    <option value="clicky">Modern Click</option>
                                </select>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-info">
                                <label>Particle Blast</label>
                                <span>Explosive particles on keypress</span>
                            </div>
                            <div class="control-action">
                                <label class="switch-ios">
                                    <input type="checkbox" id="toggleParticles" onchange="toggleVisualEffect('particles')">
                                    <span class="slider-ios"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-pro" class="tab-section" style="display: none;">
                <h2>Professional Tools</h2>
                <div class="setting-card">
                    <div class="card-header">
                        <i class="fas fa-bolt"></i> Professional Tools
                        <i class="fas fa-lock" style="color: #facc15; font-size: 0.8rem; margin-left: 5px;" title="Pro Feature"></i>
                    </div>
                    <div class="card-body">
                        <div class="control-row">
                            <div class="control-info">
                                <label>Heatmap Analysis</label>
                                <span>Show mistakes visually on keyboard</span>
                            </div>
                            <div class="control-action">
                                <label class="switch-ios">
                                    <input type="checkbox" id="toggleHeatmap" 
                                           onclick="if(!checkProFeature('Heatmap Analysis')) { event.preventDefault(); return false; }"
                                           onchange="toggleProFeature('heatmap')">
                                    <span class="slider-ios"></span>
                                </label>
                            </div>
                        </div>
                        <div class="control-row">
                            <div class="control-info">
                                <label>Spotlight Focus</label>
                                <span>Dim everything except the text</span>
                            </div>
                            <div class="control-action">
                                <label class="switch-ios">
                                    <input type="checkbox" id="toggleSpotlight" 
                                           onclick="if(!checkProFeature('Spotlight Focus')) { event.preventDefault(); return false; }"
                                           onchange="toggleProFeature('spotlight')">
                                    <span class="slider-ios"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
</div>

<div id="guideModal" class="modal-overlay" style="display: none;">
    <div class="modal-content guide-content">
        <div class="carousel-container">
            <div class="slide fade">
                <img src="Finger Position Chart.png" alt="Finger Position Chart" onerror="this.src='https://via.placeholder.com/600x300?text=Finger+Chart+Missing'">
                <div class="slide-caption">‡ßß. ‡¶∏‡¶†‡¶ø‡¶ï ‡¶Ü‡¶ô‡ßÅ‡¶≤ ‡¶™‡¶ú‡¶ø‡¶∂‡¶®</div>
            </div>
            <div class="slide fade">
                <img src="https://www.typingclub.com/m/media/typing-chart-hands.png" alt="Hand Position">
                <div class="slide-caption">‡ß®. ‡¶ï‡¶ø‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶ú‡ßã‡¶® ‡¶ó‡¶æ‡¶á‡¶°</div>
            </div>
            <a class="prev" onclick="changeSlide(-1)">&#10094;</a>
            <a class="next" onclick="changeSlide(1)">&#10095;</a>
        </div>
        <button class="close-btn" onclick="closeModal()" style="position:absolute; top:10px; right:10px; color:white;">&times;</button>
    </div>
</div>

<canvas id="certCanvas" width="800" height="600" style="display: none;"></canvas>

<div id="iosResultModal" style="display: none;">
    <div class="ios-card">
        <div class="ios-header">
            <h3>Result</h3>
            <button onclick="closeResultModal()" class="ios-close-btn">&times;</button>
        </div>

        <div class="ios-score-circle" style="width: 120px; margin: 0 auto;">
            <svg viewBox="0 0 36 36" class="circular-chart" style="display: block; max-height: 150px;">
                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#eee" stroke-width="3" />
                <path class="circle" stroke-dasharray="0, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#007AFF" stroke-width="3" />
                <text x="18" y="20.35" class="percentage" id="resWpm" text-anchor="middle" style="font-size: 0.6em; font-weight: bold; fill: currentColor;">0</text>
            </svg>
            <span style="font-size: 0.9rem; font-weight: bold; color: gray;">Overall</span>
        </div>

        <div style="display: flex; justify-content: space-around; margin: 20px 0;">
            <div><strong id="resAcc" style="font-size: 1.2rem;">0%</strong><br><small>Accuracy</small></div>
            <div><strong id="resErr" style="font-size: 1.2rem; color: #ff4757;">0</strong><br><small>Errors</small></div>
            <div><strong id="resTime" style="font-size: 1.2rem; color: #f1c40f;">0s</strong><br><small>Time</small></div>
        </div>

        <div class="ios-graph-container">
            <h4 style="margin: 0 0 10px 0; opacity: 0.6;">PERFORMANCE HISTORY</h4>
            <div class="chart-scroll-wrapper">
                <div class="chart-area" id="chartBars">
                </div>
            </div>
        </div>

        <div class="ios-actions">
            <button onclick="closeResultModal()" class="ios-btn primary">
                <i class="fa-solid fa-rotate-right"></i> Try Again
            </button>
            <button onclick="alert('Screenshot taken!')" class="ios-btn secondary">
                <i class="fa-solid fa-share-nodes"></i> Share
            </button>
        </div>
    </div>
</div>

<div id="profileModal" class="modal-overlay hidden">
    <div class="modal-content" style="position: relative; overflow: visible;"> 
        <div class="modal-header">
            <h3>User Profile</h3>
            <button id="closeProfileBtn" class="close-btn">&times;</button>
        </div>
        
        <div class="profile-body">
            
            <div class="profile-top-grid">
                
                <div class="avatar-container" title="Click to change avatar">
                    <img id="modalProfilePic" src="" alt="Profile" class="modal-avatar">
                    <div class="edit-icon-badge">
                        <i class="fas fa-pen"></i>
                    </div>
                </div>
                
                <div class="user-info-area">
                    <div class="profile-name-group">
                        <label>Display Name</label>
                        <input type="text" id="nicknameInput" placeholder="User Name" autocomplete="off">
                    </div>
                    
                    <span id="modalUsernameDisplay" class="username-tag">@loading...</span>
                    
                    <div>
                        <span id="memberStatus" class="status-badge free">Free Member</span>
                    </div>
                </div>
            </div>

            <hr style="border-color:rgba(255,255,255,0.1); margin: 20px 0;">

            <h4 style="margin-bottom:15px; color:#ddd; font-size:0.9rem; letter-spacing:1px;">LIFETIME STATISTICS</h4>
            <div class="stats-grid">
                <div class="stat-box">
                    <span id="statTotalTests">0</span>
                    <label>Tests</label>
                </div>
                <div class="stat-box">
                    <span id="statTotalWords">0</span>
                    <label>Words Typed</label>
                </div>
                <div class="stat-box">
                    <span id="statAvgWPM">0</span>
                    <label>Avg WPM</label>
                </div>
                <div class="stat-box">
                    <span id="statAccuracy">0%</span>
                    <label>Avg Accuracy</label>
                </div>
            </div>

            <div class="history-section">
                <h4 style="margin-bottom:15px; color:#ddd; font-size:0.9rem; letter-spacing:1px;">RECENT HISTORY (30 Days)</h4>
                <div id="profileChart" class="chart-container-profile">
                    <p style="color:#555; font-size:0.8rem;">No history found.</p>
                </div>
            </div>

            <div class="modal-actions">
                <button id="saveProfileBtn" class="btn-primary">Save Changes</button>
                <button id="modalLogoutBtn" class="btn-danger"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </div>

        </div> 
        
        <div class="scroll-indicator-arrow">
            <i class="fas fa-angle-double-down"></i>
        </div>

    </div>
</div>

<div id="challengeToast" class="challenge-toast hidden">
    <div class="toast-content">
        <img id="challengerImg" src="" alt="">
        <div>
            <h4 id="challengerName">Unknown</h4>
            <p>wants to race with you!</p>
        </div>
    </div>
    <div class="toast-actions">
        <button onclick="acceptChallenge()" class="btn-accept">Accept</button>
        <button onclick="rejectChallenge()" class="btn-reject">Decline</button>
    </div>
</div>

<div id="multiplayerModal" class="modal-overlay hidden">
    <div class="modal-content mp-modal">
        <div class="modal-header">
            <h2>‚öîÔ∏è Multiplayer Challenge</h2>
            <button class="close-btn" onclick="closeMultiplayerModal()">√ó</button>
        </div>
        
        <div class="mp-body">
            <div class="my-uid-box" style="background: #1e293b; padding: 10px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span style="color: #94a3b8; font-size: 0.9rem;">My Username:</span>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <code id="myUidDisplay" style="color: #4cc9f0; font-weight: bold;">Loading...</code>
                    <button onclick="copyMyUid()" style="background:none; border:none; color:#666; cursor:pointer;"><i class="far fa-copy"></i></button>
                </div>
            </div>

            <div class="mp-search-box" style="display: flex; gap: 8px;">
                <input type="text" id="opponentUidInput" placeholder="Friend's username..." style="flex:1; padding: 10px; border-radius: 6px; border: 1px solid #334155; background: #0f172a; color: white;">
                <button onclick="searchOpponent()" class="btn-primary" style="padding: 0 20px;">Search</button>
            </div>

            <div id="mpSearchResult" class="mp-user-card hidden">
                <img src="" id="mpUserImg" style="width: 60px; height: 60px; border-radius: 50%; border: 3px solid #4cc9f0; margin-bottom: 10px;">
                <h4 id="mpUserName" style="margin: 0; color: white;">User Name</h4>
                <span id="mpUserStatus" class="status-badge" style="background: #22c55e; color: black; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">Found</span>
                
                <div class="mp-settings-box">
                    <div class="mp-settings-row">
                        <label>Mode:</label>
                        <select id="mpGameMode">
                            <option value="english">English (Hard)</option>
                            <option value="bengali">Bangla (Hard)</option>
                        </select>
                    </div>
                    
                    <div class="mp-settings-row">
                        <label>Length:</label>
                        <select id="mpGameLength">
                            <option value="1">1 Sentence (Quick)</option>
                            <option value="2">2 Sentences</option>
                            <option value="5">5 Sentences</option>
                            <option value="10">10 Sentences</option>
                        </select>
                    </div>
                </div>

                <button id="sendChallengeBtn">Send Challenge</button>
            </div>

            <div id="mpFeedbackMsg" class="mp-msg" style="margin-top: 10px; text-align: center; color: #facc15;"></div>
        </div>
    </div>
</div>

<div id="mpGameRoom" class="mp-game-room hidden">
    <div class="mp-room-header">
        <div class="mp-player-card" id="p1Card">
            <img id="p1Img" src="" alt="">
            <div>
                <h3 id="p1Name">Me</h3>
                <div class="mp-stats">
                    <span id="p1Wpm">0 WPM</span> ‚Ä¢ 
                    <span id="p1Err" class="stat-err">0 Err</span>
                </div>
            </div>
        </div>

        <div class="mp-vs-badge">VS</div>

        <div class="mp-player-card opponent" id="p2Card">
            <div style="text-align:right;">
                <h3 id="p2Name">Opponent</h3>
                <div class="mp-stats">
                    <span id="p2Wpm">0 WPM</span> ‚Ä¢ 
                    <span id="p2Err" class="stat-err">0 Err</span>
                </div>
            </div>
            <img id="p2Img" src="" alt="">
        </div>
    </div>

    <div class="mp-track-container">
        <div class="mp-track">
            <div class="mp-car my-car" id="myCar" style="left: 0%;">üèéÔ∏è <span class="car-label">YOU</span></div>
            <div class="mp-progress-line" id="myProgressLine" style="width: 0%;"></div>
        </div>
        <div class="mp-track">
            <div class="mp-car opp-car" id="oppCar" style="left: 0%;">üöó <span class="car-label">OPP</span></div>
            <div class="mp-progress-line opp-line" id="oppProgressLine" style="width: 0%;"></div>
        </div>
    </div>

    <div class="mp-status-bar">
        <span id="mpGameStatus">Waiting for opponent...</span>
        <button id="quitMatchBtn" class="btn-danger" onclick="quitMultiplayerMatch()">üö´ Quit Match</button>
    </div>

    <div id="mpTextDisplay" class="mp-text-display"></div>
</div>

<div id="mpResultModal" class="modal-overlay hidden">
    <div class="modal-content mp-result-card">
        <h2>üèÅ RACE FINISHED!</h2>
        <div id="winnerDisplay" class="winner-text">Winner: ...</div>
        
        <div class="mp-result-grid">
            <div class="result-col me">
                <img id="resMyImg" src="" class="res-avatar">
                <h3>YOU</h3>
                <p>WPM: <span id="resMyWpm">0</span></p>
                <p>Accuracy: <span id="resMyAcc">0%</span></p>
                <p>Errors: <span id="resMyErr">0</span></p>
            </div>
            
            <div class="result-vs">VS</div>

            <div class="result-col opp">
                <img id="resOppImg" src="" class="res-avatar">
                <h3>OPPONENT</h3>
                <p>WPM: <span id="resOppWpm">0</span></p>
                <p>Accuracy: <span id="resOppAcc">0%</span></p>
                <p>Errors: <span id="resOppErr">0</span></p>
            </div>
        </div>

        <div class="modal-actions">
        </div>
        <div class="modal-actions">
    <button onclick="closeResultAndQuit()" class="btn-primary">Back to Lobby</button>
    <button onclick="playAgain()" class="btn-success" style="margin-left: 10px;">
        <i class="fas fa-redo"></i> Play Again
    </button>
</div>
    </div>
</div>

<div id="publicProfileModal" class="modal-overlay hidden">
    <div class="modal-content" style="max-width: 450px; background: linear-gradient(145deg, #1e1e2e, #16213e);">
        <div class="modal-header" style="border-bottom: 1px solid rgba(255,255,255,0.1);">
            <h3 style="color: #4cc9f0;">Player Profile</h3>
            <button onclick="closePublicProfile()" class="close-btn">&times;</button>
        </div>
        
        <div class="profile-body" style="text-align: center; padding-top: 20px;">
            
            <div style="position: relative; display: inline-block;">
                <img id="pubPic" src="" style="width: 100px; height: 100px; border-radius: 50%; border: 4px solid #4361ee; object-fit: cover;">
                <span id="pubRankBadge" style="position: absolute; bottom: 0; right: 0; background: #facc15; color: #000; font-size: 0.8rem; font-weight: bold; padding: 2px 8px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">#1</span>
            </div>

            <h2 id="pubName" style="margin: 15px 0 5px 0; color: white;">User Name</h2>
            <p id="pubUsername" style="color: #aaa; font-family: monospace; font-size: 1rem;">@username</p>

            <div style="margin-top: 25px; background: rgba(255,255,255,0.05); border-radius: 12px; padding: 15px; border: 1px solid rgba(255,255,255,0.1);">
                <h4 style="margin: 0 0 15px 0; color: #facc15; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px;">üèÜ Weekly Performance</h4>
                
                <div style="display: flex; justify-content: space-around;">
                    <div>
                        <strong id="pubScore" style="display: block; font-size: 1.5rem; color: white;">0</strong>
                        <span style="font-size: 0.75rem; color: #888;">Points</span>
                    </div>
                    <div>
                        <strong id="pubWPM" style="display: block; font-size: 1.5rem; color: #2ecc71;">0</strong>
                        <span style="font-size: 0.75rem; color: #888;">Avg WPM</span>
                    </div>
                    <div>
                        <strong id="pubGames" style="display: block; font-size: 1.5rem; color: #4cc9f0;">0</strong>
                        <span style="font-size: 0.75rem; color: #888;">Matches</span>
                    </div>
                </div>
            </div>

            <button id="pubChallengeBtn" class="stylish-btn start-btn-stylish" style="width: 100%; margin-top: 25px; justify-content: center;">
                <i class="fas fa-gamepad"></i> Challenge This Player
            </button>

        </div>
    </div>
</div>
<div id="proLockModal" class="pro-lock-overlay">
    <div class="pro-lock-box">
        <div class="lock-icon-circle">
            <i class="fas fa-crown"></i>
        </div>
        <h2 class="gold-text">PRO FEATURE LOCKED</h2>
        <p id="lockMsg">This feature is available for <br> Premium Members only.</p>
        
        <div class="lock-actions">
            <button onclick="closeProLock()" class="btn-cancel">Cancel</button>
            <a href="pro.html" class="btn-upgrade-gold">
                UPGRADE NOW <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</div>
<script src="text-db.js"></script>
<script src="online-db.js"></script>
<script src="bengali-utils.js"></script>
<script src="settings-manager.js"></script>

<script src="ui-interactions.js"></script>

<script type="module" src="firebase-config.js"></script>
<script type="module" src="auth-manager.js"></script>
<script type="module" src="result-manager.js"></script>

<script type="module" src="multiplayer-manager.js"></script>

<script src="script.js"></script>

<script type="module">
    import { initMultiplayerListener } from "./multiplayer-manager.js";
    import { onAuthStateChanged, auth } from "./firebase-config.js";

    // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶ø‡¶® ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶ö‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶û‡ßç‡¶ú ‡¶∂‡ßã‡¶®‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá
    onAuthStateChanged(auth, (user) => {
        if (user) {
            console.log("üü¢ Multiplayer Service Started for: " + user.displayName);
            initMultiplayerListener();
        }
    });
</script>

</body>
</html>